\documentclass[specialist,
substylefile = spbu.rtx,
               subf,href,colorlinks=true, 12pt]{disser}

% \documentclass[specialist, substylefile = spbureport.rtx,
            %    subf,href,colorlinks=true, 12pt]{disser}

\usepackage[a4paper,
            mag=1000, includefoot,
            left=3cm, right=1.5cm, top=2cm, bottom=2cm, headsep=1cm, footskip=1cm]{geometry}

\usepackage[T1,T2A]{fontenc}
\usepackage{graphicx}
\graphicspath{ {images/} }
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm} %for \newtheorem*
\usepackage{bm}
\usepackage[english,russian]{babel}

% \usepackage{polyglossia}
% \usepackage{fontspec}
% \setmainfont{Times New Roman}
% \setsansfont{Arial}
% \setmonofont{Courier New}

% Использовать полужирное начертание для векторов
\let\vec=\mathbf
% Включать подсекции в оглавление
\setcounter{tocdepth}{2}

% c++ code
\usepackage{listings}
\usepackage{xcolor}
\lstset { %
    language=C++,
    backgroundcolor=\color{black!5}, % set backgroundcolor
    basicstyle=\footnotesize,% basic font setting
}


\usepackage{hyperref}
\usepackage{relsize}
\usepackage{xspace}
\newcommand{\Cpp}{\texorpdfstring{\mbox{C\raisebox{.35ex}{\textsmaller[2]{++}}}\xspace}{C++}}
% \newcommand\Cpp{C\nolinebreak[4]\hspace{-.05em}\raisebox{.4ex}{\relsize{-3}{\textbf{++}}}}

% \newtheorem*{definition}{Определение}
% \newtheorem*{example}{Пример}
% \newtheorem*{hypothesis}{Гипотеза}
% \newtheorem*{question}{Вопрос}
% \newtheorem*{algorithm}{Алгоритм}

% \newcommand{\rank}{\mathsf{rank}\ }










\begin{document}


% \institution{Санкт-Петербургский государственный университет\\
%     Математико-механический факультет\\
%     Кафедра Статистического Моделирования
% }
% \title{«Научно-исследовательская работа» (семестр 7)}
% \topic{Разработка программных средств и решение задач принятия решений с помощью методов тропической математики.}
% \author{Ткаченко Егор Андреевич}
% \group{группа 19.Б04-мм}
% \sa       {Кривулин Николай Кимович}
% \sastatus {д.\,ф.-м.\,н., профессор}
% \city{Санкт-Петербург}
% \date{2023}

% \institution{Санкт-Петербургский государственный университет\\
%     Математико-механический факультет\\
%     Кафедра Статистического Моделирования
% }
% \title{«Научно-исследовательская работа» (семестр 8)}
% \topic{Разработка программных средств и решение задач принятия решений с помощью методов тропической математики.}
% \author{Ткаченко Егор Андреевич}
% \group{группа 19.Б04-мм}
% \sa       {Кривулин Николай Кимович}
% \sastatus {д.\,ф.-м.\,н., профессор}
% \city{Санкт-Петербург}
% \date{2023}
%     \maketitle


    \institution{%
        Санкт-Петербургский государственный университет\\
        Математико-механический факультет\\
        Кафедра Статистического Моделирования
    }

    \title{Выпускная квалификационная работа}

    % Тема
    \topic{Разработка программных средств и решение задач принятия решений с помощью методов тропической математики}

    % Автор
    \author{\textsc{Ткаченко} Егор Андреевич}

    \group{%
        Уровень образования: бакалавриат\\
        Направление 01.03.02 <<Прикладная математика и информатика>>\\
        Основная образовательная программа СВ.5004.2019 <<Прикладная математика и информатика>>
    }

    % Научный руководитель
    \sa       {Н.\,К.~Кривулин}
    \sastatus {Профессор, кафедра статистического моделирования\,\\
            д.\,ф.-м.\,н., профессор}

    % Рецензент
    \rev      {В.\,А.~Пархоменко}
    \revstatus{Старший преподаватель, Высшая школа интеллектуальных систем и суперкомпьютерных технологий СПбПУ Петра Великого}


    % Город и год
    \city{Санкт-Петербург}
    \date{\number\year}

    \maketitle

    %%
    %% Titlepage in English
    %%
    %
    \institution{%
        Saint Petersburg State University \\
        Applied Mathematics and Computer Science
    }
    %
    \title{Graduation Project}
    %
    %% Topic
    \topic{Software development and solution of decision-making problems using tropical mathematics methods}
    %
    %% Author
    \author{\textsc{Tkachenko} Egor Andreevich} % Full Name
    \group{}

    %% Scientific Advisor
    \sa       {N.\,K.~Krivulin}
    \sastatus {Professor, Department of Statistical Modelling}
    %
    %% Reviewer
    \rev      {V.\,A.~Parkhomenko}
    \revstatus{Senior Lecturer, Graduate School of Intelligent Systems and Supercomputing, Peter the Great University of St. Petersburg}

    % \rev      {P.\,P.~Petrov}
    % \revstatus{The most leading research associate, NPO~``Horns and Hoofs''}
    %
    %% City & Year
    \city{Saint Petersburg}
    \date{\number\year}

    \maketitle[en]



    \pagebreak
    \tableofcontents
    \pagebreak

    \intro

    Многокритериальные задачи оценки альтернатив на основе парных сравнений составляют важный класс задач принятия решений, которые встречаются во многих областях научной и практической деятельности. Пусть имеется набор альтернатив принятия некоторого решения. Известны количественные результаты парных сравнений, при которых любые две альтернативы сравниваются между собой в соответствии с несколькими критериями. Результаты сравнений могут быть получены, например, путем опроса респондентов или с помощью других процедур сравнения. Требуется на основе относительных результатов парных сравнений определить абсолютный рейтинг каждой альтернативы для принятия решения. Такие задачи встречаются при принятии управленческих решений в менеджменте, изучении предпочтений покупателей в маркетинге, анализе социологических опросов в социологии, прогнозе результатов выборов в политологии и в других областях \cite{Saaty1993Prinyatie}. 

    Одним из подходов к решению является метод аппроксимации матриц парных сравнений в $\log$-чебышевской метрике \cite{Krivulin2019Metody,Krivulin2019Tropical,Krivulin2022Using,Krivulin2020Reshenie}. Этот подход позволяет получить аналитическое решение задачи в терминах $\max$-алгебры -- одной из алгебраических систем с идемпотентными операциями, которые изучает тропическая математика \cite{Maslov1994Idemotent, Butkovic2010Maxlinear, Heidergott2006Max}.
    
    Численное решение задач оптимизации с помощью методов тропической математики, включая решение задачи принятия решений, требует применения новых программных инструментов, предназначенных для вычислений с идемпотентными операциями. Целью настоящей работы является разработка эффективных программных средств символьных вычислений с использованием $\max$-алгебры.

    В этом семестре была разработана и реализована вторая структура, проведены сравнения с прошлой.


    \chapter{Многокритериальная задача принятия решений}

    Рассмотрим задачу оценки рейтингов альтернатив на основе парных сравнений, в которой $n$ альтернатив $\mathcal{A}_{1}, \ldots, \mathcal{A}_{n}$ сравниваются попарно по $m$ критериям. Пусть $\bm{A}_{k} = (a_{ij}^{(k)})$ обозначает матрицу порядка $n$, где элемент $a_{ij}^{(k)}>0$ показывает во сколько раз альтернатива $\mathcal{A}_{i}$ превосходит альтернативу $\mathcal{A}_{j}$ в соответствии с критерием $k=1,\ldots,m$. Критерии также сравниваются попарно, а результаты их сравнений образуют матрицу $\bm{C}=(c_{kl})$, где $c_{kl}$ показывает во сколько раз критерий $k$ важнее для принятия решения, чем $l$. Необходимо на основе матриц парных сравнений $\bm{C}$ и $\bm{A}_{1},\ldots,\bm{A}_{m}$ найти индивидуальный рейтинг каждой альтернативы \cite{Saaty1993Prinyatie}.
    
    Ниже будет рассмотрено решение задачи на основе $\log$-чебышевской аппроксимации с применением методов тропической алгебры.

    \chapter{Элементы тропической математики}

    В этой главе приводятся основные обозначения и понятия тропической $\max$-алгебры \cite{Maslov1994Idemotent, Butkovic2010Maxlinear, Heidergott2006Max}, которые потребуются в дальнейшем.
    
    Max-алгеброй называется множество неотрицательных вещественных чисел $\mathbb{R}_{+}$ с операциями сложения и умножения. Сложение обозначается знаком $\oplus$, определено как максимум: ${x\oplus y=\max\{x,y\}}$ и обладает свойством идемпотентности: ${x\oplus x=x}$ для любых $x,y\in\mathbb{R}_{+}$. Умножение определено и обозначается как обычно.  
            
    Векторные и матричные операции выполняются по обычным правилам с заменой арифметического сложения на операцию $\oplus$. Нулевой вектор обозначается символом $\bm{0}$. Для ненулевого вектора-столбца $\bm{x}=(x_{j})$ определен мультипликативно сопряженный вектор-строка $\bm{x}^{-}=(x_{j}^{-})$, где $x_{j}^{-}=x_{j}^{-1}$, если $x_{j}\ne0$, и $x_{j}^{-}=0$ в противном случае. Для ненулевой матрицы $\bm{A}=(a_{ij})$ определена мультипликативно сопряженная матрица $\bm{A}^{-}=(a_{ij}^{-})$, где $a_{ij}^{-}=a_{ji}^{-1}$, если $a_{ji}\ne0$, иначе $a_{ij}^{-}=0$.

    Вектор $\bm{b}$ линейно зависит от векторов $\bm{a}_{1},\ldots,\bm{a}_{n}$, если существует набор чисел $x_{1},\ldots,x_{n}\in\mathbb{R}_{+}$ такой, что $\bm{b}=x_{1}\bm{a}_{1}\oplus\cdots\oplus x_{n}\bm{a}_{n}$. Коллинеарность двух векторов имеет обычный смысл: векторы $\bm{a}$ и $\bm{b}$ являются коллинеарными, если $\bm{b}=x\bm{a}$ для некоторого $x\in\mathbb{R}_{+}$.

    Множество всех линейных комбинаций $x_{1}\bm{a}_{1}\oplus\cdots\oplus x_{n}\bm{a}_{n}$ образует тропическое линейное пространство. Любой вектор $\bm{y}$ пространства выражается с помощью матрицы $\bm{A}=(\bm{a}_{1},\ldots,\bm{a}_{n})$, составленной из этих векторов как столбцов, и вектора $\bm{x}=(x_{1},\ldots,x_{n})^{\mathrm{T}}$ в виде $\bm{y}=\bm{A}\bm{x}$.

    Рассмотрим квадратные матрицы с элементами из $\max$-алгебры. Единичная матрица обозначается символом $\bm{I}$ и имеет обычный вид. Целая неотрицательная степень квадратной матрицы $\bm{A}$ определена для всех натуральных $p$ так, что $\bm{A}^{0}=\bm{I}$, $\bm{A}^{p}=\bm{A}^{p-1}\bm{A}=\bm{A}\bm{A}^{p-1}$.

    След матрицы $\bm{A}=(a_{ij})$ порядка $n$ вычисляется по формуле 
    $$\mathop\mathrm{tr}\bm{A}=a_{11}\oplus\cdots\oplus a_{nn}.$$

    Спектральным радиусом матрицы $\bm{A}$ называется число, которое вычисляется по формуле
    \begin{equation*}
    \lambda
    =
    \mathop\mathrm{tr}\bm{A}\oplus\cdots\oplus\mathop\mathrm{tr}\nolimits^{1/n}(\bm{A}^{n})
    =
    \bigoplus_{i=1}^{n}{\mathop\mathrm{tr}}^{1/i}(\bm{A}^{i}).
    \end{equation*}

    При условии, что $\lambda\leq1$, определен оператор Клини (звезда Клини), который сопоставляет матрице $\bm{A}$ матрицу
    \begin{equation*}
    \bm{A}^{\ast}
    =
    \bm{I}\oplus\bm{A}\oplus\cdots\oplus\bm{A}^{n-1}
    =
    \bigoplus_{i=0}^{n-1}\bm{A}^{i}.
    \end{equation*}

    \chapter{Решение многокритериальной задачи парных сравнений}

    Рассмотрим многокритериальную задачу парных сравнений с матрицами парных сравнений альтернатив $\bm{A}_{1},\ldots,\bm{A}_{m}$ и матрицей сравнений критериев $\bm{C}$. Приведем алгоритм решения, который использует аппроксимацию матриц парных сравнений в $\log$-че\-бы\-шевской метрике и описан в работах \cite{Krivulin2019Metody,Krivulin2019Tropical,Krivulin2022Using}. 

    \begin{itemize}
        \item[1.]
        Для матрицы $\bm{C}$ находится спектральный радиус $\lambda$, составляется матрица $\lambda^{-1}\bm{C}$, а затем в параметрической форме определяется вектор весов критериев
        $$
        \bm{w}
        =
        (\lambda^{-1}\bm{C})^{\ast}\bm{v},
        \qquad
        \bm{v}>\bm{0},
        \qquad
        \lambda
        =
        \bigoplus_{i=1}^{m}{\mathop\mathrm{tr}}^{1/i}(\bm{C}^{i}).
        $$
        \item[2.]
        Если вектор $\bm{w}$ не единственный (с точностью до положительного множителя), то определяются наилучший и наихудший дифференцирующие векторы весов.
        \begin{itemize}
            \item[2.1.]
            Наилучший дифференцирующий вектор весов имеет вид
            $$
            \bm{w}_{1}
            =
            \bm{P}(\bm{I}\oplus\bm{P}_{lk}^{-}\bm{P})\bm{v}_{1},
            \qquad
            \bm{v}_{1}
            >
            \bm{0},
            $$
            где матрица $\bm{P}=(\bm{p}_{j})$ получена из $(\lambda^{-1}\bm{C})^{\ast}$ удалением линейно зависимых столбцов, матрица $\bm{P}_{lk}$ получена из $\bm{P}=(p_{ij})$ обнулением всех элементов, кроме $p_{lk}$,
            $$
            k
            =
            \arg\max_{j}\bm{1}^{\mathrm{T}}\bm{p}_{j}\bm{p}_{j}^{-}\bm{1},
            \qquad
            l
            =
            \arg\max_{i}p_{ik}^{-1}.
            $$
            \item[2.2.]
            Наихудший дифференцирующий вектор весов имеет вид
            $$
            \bm{w}_{2}
            =
            (\Delta^{-1}\bm{1}\bm{1}^{\mathrm{T}}\oplus\lambda^{-1}\bm{C})^{\ast}\bm{v}_{2},
            \qquad
            \bm{v}_{2}
            >
            \bm{0},
            \qquad
            \Delta
            =
            \bm{1}^{\mathrm{T}}(\lambda^{-1}\bm{C})^{\ast}\bm{1}.
            $$
        \end{itemize}
        \item[3.]
        С помощью векторов $\bm{w}_{1}=(w_{i}^{(1)})$ и $\bm{w}_{2}=(w_{i}^{(2)})$ строятся взвешенные суммы матриц парных сравнений альтернатив:
        $$
        \bm{B}
        =
        \bigoplus_{i=1}^{m}w^{(1)}_{i}\bm{A}_{i},
        \qquad
        \bm{D}
        =
        \bigoplus_{i=1}^{m}w^{(2)}_{i}\bm{A}_{i}.
        $$
        % \item[4.]
        % Повторяя действия пунктов 1 и 2.1 (2.2) на основе взвешенной суммы $\bm{B}$ ($\bm{D}$) вычисляется вектор рейтингов альтернатив, соответствующий наилучшему (наихудшему) дифференцирующему вектору весов критериев.
        
        
        \item[4.]
        На основе матрицы $\bm{B}$ вычисляется наилучший дифференцирующий вектор рейтингов альтернатив.
        \begin{itemize}
            \item[4.1.]
            Для матрицы $\bm{B}$ находится спектральный радиус $\mu$, составляется матрица $\mu^{-1}\bm{B}$, а затем определяется вектор рейтингов
            $$
            \bm{x}_{1} = (\mu^{-1}\bm{B})^{\ast}\bm{u}_{1},
            \qquad
            \bm{u}_{1} > \bm{0},
            \qquad
            \mu = \bigoplus_{i=1}^{n}{\mathop\mathrm{tr}}^{1/i}(\bm{B}^{i}).
            $$
            \item[4.2.]
            Если вектор рейтингов $\bm{x}_{1}$ не единственный, то строится наилучший дифференцирующий вектор
            $$
            \bm{x}_{1}^{\prime} =
            \bm{Q}(\bm{I}\oplus\bm{Q}_{lk}^{-}\bm{Q})
            \bm{u}_{1}^{\prime},
            \qquad
            \bm{u}_{1}^{\prime} > \bm{0},
            $$
            где матрица $\bm{Q}=(\bm{q}_{j})$ получена из $(\mu^{-1}\bm{B})^{\ast}$ удалением линейно зависимых столбцов, матрица $\bm{Q}_{lk}$ получена из $\bm{Q}=(q_{ij})$ обнулением всех элементов, кроме $q_{lk}$, 
            $$
            k = \arg\max_{j}\bm{1}^{\mathrm{T}}\bm{q}_{j}\bm{q}_{j}^{-}\bm{1},
            \qquad
            l = \arg\max_{i}q_{ik}^{-1}.
            $$
        \end{itemize}
        \item[5.]
        На основе матрицы $\bm{D}$ вычисляется наихудший дифференцирующий вектор рейтингов альтернатив.
        \begin{itemize}
            \item[5.1.]
            Для матрицы $\bm{D}$ находится спектральный радиус $\nu$, составляется матрица $\nu^{-1}\bm{D}$, а затем определяется вектор рейтингов
            $$
            \bm{x}_{2} =
            (\nu^{-1}\bm{D})^{\ast}\bm{u}_{2},
            \qquad
            \bm{u}_{2} > \bm{0},
            \qquad
            \nu
            =
            \bigoplus_{i=1}^{n}{\mathop\mathrm{tr}}^{1/i}(\bm{D}^{i}).
            $$
            \item[5.2.]
            Если вектор рейтингов $\bm{x}_{2}$ не единственный, то строится наихудший дифференцирующий вектор
            $$
            \bm{x}_{2}^{\prime} =
            (\delta^{-1}\bm{1}\bm{1}^{\mathrm{T}}\oplus\nu^{-1}\bm{D})^{\ast}
            \bm{u}_{2}^{\prime},
            \qquad
            \bm{u}_{2}^{\prime} > \bm{0},
            \qquad
            \delta =
            \bm{1}^{\mathrm{T}}(\nu^{-1}\bm{D})^{\ast}\bm{1}.
            $$
        \end{itemize}
        
    \end{itemize}

    На всех этапах алгоритма может быть получен не единственный вектор (весов, рейтингов), а набор векторов, которые будут определять некоторое пространство решений. В этом случае, важной оказывается задача сокращения числа векторов в наборе за счет удаления векторов, линейно зависимых от остальных.

    \chapter{Разработка программных средств}

    \section{Разработка структур для хранения чисел}

    При проверке линейной зависимости векторов использование типов с плавающей точкой может привести к неточным результатам, поэтому была разработана структура для хранения чисел основанная на целочисленных типах, для которых операции являются точными.

    \subsection{Структура A}

    В задаче принятия решений используются матрицы парных сравнений из натуральных и обратных натуральным чисел.
    Для аналитического решения задачи требуется предусмотреть точное выполнение операций умножения и извлечения корня натуральной степени.
    Рациональных чисел $\displaystyle \frac{a}{b}$ не достаточно из-за операции извлечения корня. 
    Необходимо добавить к структуре числа корень целой степени:  $\displaystyle \left(\frac{a}{b}\right)^{1/n}$.
    
    Такое представление чисел сужает $\max$-алгебру на множество чисел
    $$\Big\{x = \displaystyle \left(\frac{a}{b}\right)^{1/n} \, |\, a \in \mathbb{N} \cup 0, b \in \mathbb{N}, n \in \mathbb{N}\Big\}.$$ Это множество замкнуто относительно операций сложения, умножения, извлечения корня целой степени, нахождения обратного элемента и линейно упорядочено. 

    С такой структурой операции и отношения определяются следующим образом:
    \begin{itemize}
        \item Умножение:
        $$ \left(\frac{a_1}{b_1}\right)^{1/n_1} \times \left(\frac{a_2}{b_2}\right)^{1/n_2} = \left(\frac{a_1^{n_2}a_2^{n_1}}{b_1^{n_2}b_2^{n_1}}\right)^{1/n_1n_2}.$$
        \item Сравнение:
        $$ \left(\frac{a_1}{b_1}\right)^{1/n_1} < \left(\frac{a_2}{b_2}\right)^{1/n_2} \Leftrightarrow
        \left(\frac{a_1^{n_2}}{b_1^{n_2}}\right)^{1/n_1n_2} < \left(\frac{a_2^{n_1}}{b_2^{n_1}}\right)^{1/n_1n_2}\Leftrightarrow$$
        $$\Leftrightarrow
        \frac{a_1^{n_2}}{b_1^{n_2}} < \frac{a_2^{n_1}}{b_2^{n_1}}\Leftrightarrow
        {a_1^{n_2}}{b_2^{n_1}} < {a_2^{n_1}}{b_1^{n_2}}.$$
        \item Обратный элемент относительно умножения:
        $$ \left(\left(\frac{a}{b}\right)^{1/n}\right)^{-1} = \left(\frac{b}{a}\right)^{1/n}, \qquad a \neq 0.$$
    \end{itemize}

    Однако, если использовать приведенные формулы, числа будут увеличиваться очень быстро.
    Причем, часто $n_1$ и $n_2$ оказываются равными. Это мотивирует использовать НОД в формулах:
    $$\tilde{n}_1 = n_1 / \gcd(n_1, n_2), \qquad \tilde{n}_2 = n_2 / \gcd(n_1, n_2).$$
    % $$n_1 =  \tilde{n}_1 \cdot \gcd(n_1, n_2), \qquad n_2 =  \tilde{n}_2 \cdot \gcd(n_1, n_2).$$

    \begin{itemize}
        \item Умножение:
        $$ \left(\frac{a_1}{b_1}\right)^{1/n_1} \times \left(\frac{a_2}{b_2}\right)^{1/n_2} = \left(\frac{a_1^{\tilde{n}_2}a_2^{\tilde{n}_1}}{b_1^{\tilde{n}_2}b_2^{\tilde{n}_1}}\right)^{1/\tilde{n}_1\cdot \gcd(n_1, n_2) \cdot \tilde{n}_2}.$$
    \end{itemize}
        После умножения числитель и знаменатель сокращаются на их НОД.
    \begin{itemize}
        \item Сравнение:
        $$ \left(\frac{a_1}{b_1}\right)^{1/n_1} < \left(\frac{a_2}{b_2}\right)^{1/n_2} \Leftrightarrow
        {a_1^{\tilde{n}_2}}{b_2^{\tilde{n}_1}} < {a_2^{\tilde{n}_1}}{b_1^{\tilde{n}_2}}.$$
    \end{itemize}

    \subsection{Структура B}

    Описанная ранее структура имеет недостаток --- числитель и знаменатель становятся большими очень быстро с увеличением размера матриц. Из-за этого операция умножения замедляется, т.к. числа не помещаются в стандартные типы, для которых оптимизированы процессоры.

    Идея второй структуры заключается в том, чтобы заменить умножение сложением, как это делает логарифмирование:
    $\log a b = \log a + \log b.$

    Структура B представляет числа в виде, похожем на факторизацию, но степени простых рациональны:
    $$x= p_1^{a_1}p_2^{a_2}\dots p_k^{a_k}, \quad \text{где}\quad p_i \text{--- простые}, \quad a_i \in \mathbb{Q}.$$

    Структура реализуется упорядоченным по простым числам вектором пар натуральных чисел и рациональных чисел. 
    
    Для хранения 0 отведена переменная логического типа.
    % с отдельным состоянием для 0, т.е. если надо хранить 0, то это отражено в булеановской переменной.

    

    \begin{itemize}
        \item Умножение реализуется слиянием векторов множителей. Когда простой делитель присутствует в обоих множителях, его степени складываются и если сумма не равна нулю, он добавляется в результат. Если простой делитель присутствует только в одном из множителей, он со своей степенью добавляется в результат.
        
        Например:
        $$ 2^3 3^{-2} \times 3^2 5^{-1} = 2^3 3^{-2+2} 5^{-1} =  2^3 5^{-1}.$$

        \item Обратный по умножению получается изменением знака степеней простых.
        $$ x^{-1} = (p_1^{a_1}p_2^{a_2}\dots p_k^{a_k})^{-1} = p_1^{-a_1}p_2^{-a_2}\dots p_k^{-a_k}.$$

        \item Сравнение двух чисел можно свести к сравнению с единицей с помощью умножения одного аргумента на обратный по умножению второго аргумента (деления).

        Чтобы сравнить число с единицей, все степени простых умножаются на наименьший общий множитель $l$ знаменателей степеней $a_i$, чтобы степени стали целыми. Далее находится два произведения --- простых (возведенных в соответствующую степень) с положительными степенями и простых с отрицательными. Два произведения сравниваются как целые числа и определяют результат исходного сравнения.

        $$a < b \Leftrightarrow a/b = p_1^{a_1}p_2^{a_2}\dots p_k^{a_k} < 1 \Leftrightarrow 
        p_1^{l a_1}p_2^{l a_2}\dots p_k^{l a_k} < 1 \Leftrightarrow $$
        $$\Leftrightarrow
        \prod_{i \in \{i | a_i > 0\}} p_i^{l a_i} < \prod_{j \in \{j | a_j < 0\}} p_j^{-l a_j}.
        $$

        Эта процедура медленная и зачастую избыточно точная, поэтому реализована более быстрая, но приближенная процедура сравнения.
        
        Для отношения сравниваемых чисел вычисляется приближенное значение в типе с плавающей точкой и если оно достаточно далеко от 1 (разница больше $10^{-15}$), то используется результат сравнения приближения с 1, иначе запускается медленный и точный метод.
    \end{itemize}


    
    % При экспоненциальном росте $x$ степени $a_i$ будут расти линейно, что не увеличит время выполнения операций над ними.



    % Реализация в листинге
    % \ref{listing:fraction}.


    \section{Матрицы}
    Было реализовано расширение библиотеки Eigen, позволяющее использовать описанные раньше структуры в матрицах.
    % Были реализованы элементы тропической математики такие, как нахождение следа, тропического определителя, транспонированный матрицы, спектрального радиуса, матрицы Клини, проверка линейной зависимости вектора от набора векторов, выбор ЛНЗ набора векторов из данных, нахождение лучших и худших дифференцирующих векторов в листинге 
    % \ref{listing:matrix}.


    % \section{Вывод решения}
    % К каждому классу был добавлен метод вывода в latex в листинге \ref{listing:to_latex}.
    
    \section{Сравнение производительности структур}

    Структуры сравнивались по времени вычисления $(\lambda^{-1}\bm{A})^*$, где $\lambda$ --- спектральный радиус матрицы $\bm{A}$, $\bm{A}$ --- случайно сгенерированная матрица парных сравнений $n\times n$.

    Асимптотика такого теста --- $O(n^4 (t_\times + t_\oplus))$, где $t_\times, t_\oplus$ --- сложность (время) умножения и сложения чисел, соответственно.
    Величина $n^4$ т.к. матрицы размеры $n\times n$ возводятся в степень $n$, а асимптотика одного умножения матрицы на матрицу --- $n^3$. Так же есть сложение $n$ матриц, но это имеет асимптотику $n^3$.

    Для каждого значения $n$ от 10 до 100 с шагом 5 проведено по 10 тестов и найдено среднее время вычисления в миллисекундах.

    \begin{figure*}[h]
        \begin{minipage}[t]{\columnwidth}% 1st minipage
        \begin{subfigure}[t]{0.475\linewidth}%
            \includegraphics[width=\linewidth]{point.pdf}
            \caption{Все тесты}
        \end{subfigure}%
        \hfill
        \begin{subfigure}[t]{0.475\linewidth}%
            \includegraphics[width=\linewidth]{line.pdf}
            \caption{Среднее тестов}
        \end{subfigure}
        \end{minipage}%
        \hfill
        \begin{minipage}[t]{\columnwidth}% 2nd minipage
        \begin{subfigure}[t]{0.475\linewidth}%
            \includegraphics[width=\linewidth]{line_smooth_norm.pdf}
            \caption{Масштабирование по размеру матриц}
        \end{subfigure}%
        \hfill
        \begin{subfigure}[t]{0.475\linewidth}%
            \includegraphics[width=\linewidth]{relation.pdf} 
            \caption{Отношение времени вычисления B и A}
        \end{subfigure}
        \caption{Результаты тестирования.}
        \label{fig:fig1}
        \end{minipage}
    \end{figure*}


    Как видно из графика \ref{fig:fig1}(г), при маленьких размерах матрицы структура A быстрее, а начиная примерно с $n = 30$, структура B становится быстрее. При размерах матрицы $n = 100$ (время вычисления порядка 20 минут) структура B лучше на 10\%.



    % \chapter{Пример решения практической задачи}
        % \input{1.tex}

    \conclusion

    Для решения многокритериальных задач парных сравнений разработаны модели представления данных, алгоритмы точных вычислений, их программная реализация и проведено сравнение.

    Полученные результаты могут оказаться полезными для решения других задач, где требуется обеспечить точные вычисления, например для задач криптографии.
    
    На языке $\Cpp$ было разработано программное средство \cite{SourceCode}, реализующее описанные выше структуры и аппарат тропической математики.  
    
    \renewcommand{\refname}{}
    \vspace{-25pt}
    \bibliographystyle{ugost2008}
    \bibliography{references}

    % \appendix
    %     \chapter{Исходный код}

    % \renewcommand{\sectionfont}{\normalsize\bfseries}
    % \renewcommand{\theappendixfont}{\normalsize\bfseries}
    % \clearpage
    % \addcontentsline{toc}{chapter}{Приложения}

    % \input{fraction.tex}
    % \input{matrix.tex}
    % \input{to_latex.tex}

    % \input{solution.tex}

\end{document}